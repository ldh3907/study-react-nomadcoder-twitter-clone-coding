(this.webpackJsonptwitter=this.webpackJsonptwitter||[]).push([[0],{35:function(e,t,n){},36:function(e,t,n){},41:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(28),i=n.n(a),s=(n(35),n(5)),o=(n(36),n(18)),u=n(6),j=n(8),d=n.n(j),l=n(14),b=n(19),p=(n(38),n(55),n(54),b.a.initializeApp({apiKey:"AIzaSyC5bDFzqfeMqbXDjDiErpbRy6i6E-415Bc",authDomain:"twitter-clone-4561b.firebaseapp.com",projectId:"twitter-clone-4561b",storageBucket:"twitter-clone-4561b.appspot.com",messagingSenderId:"326046460264",appId:"1:326046460264:web:d2b9be2ec836fb82608edd"})),h=b.a,O=b.a.auth(),f=b.a.firestore(),m=b.a.storage(),x=(n(41),n.p+"static/media/Edit.2fa16508.svg"),g=n(1),w=function(e){var t=e.userObj,n=e.refreshUser,r=Object(c.useState)(t.displayName),a=Object(s.a)(r,2),i=a[0],o=a[1],j=Object(c.useState)(!1),b=Object(s.a)(j,2),p=b[0],h=b[1],m=Object(u.f)(),w=function(){var e=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.collection("tweets").where("creatorId","==",t.uid).orderBy("createdAt","desc").get();case 2:e.sent.docs.map((function(e){return e.data()}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){w()}),[]);var v=function(){var e=Object(l.a)(d.a.mark((function e(c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),t.displayName===i){e.next=6;break}return e.next=4,t.updateProfile({displayName:i});case 4:n(),h(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("section",{id:"profile",children:Object(g.jsxs)("div",{id:"profile-form",children:[Object(g.jsxs)("form",{id:"profile-rename-wrap",onSubmit:v,children:[Object(g.jsxs)("div",{id:"profile-top-wrap",children:[Object(g.jsx)("h1",{children:t.displayName}),Object(g.jsx)("button",{id:"tweet-rename-btn",onClick:function(){return h((function(e){return!e}))},children:Object(g.jsx)("img",{src:x})})]}),p?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("input",{type:"text",onChange:function(e){var t=e.target.value;o(t)},placeholder:"\ubcc0\uacbd\ud558\uc2e4 \uc774\ub984\uc744 \uc801\uc5b4\uc8fc\uc138\uc694",value:i}),Object(g.jsx)("input",{type:"submit",value:"\uc774\ub984 \ubcc0\uacbd"})]}):null]}),Object(g.jsx)("button",{id:"profile-logOut-btn",onClick:function(){O.signOut(),m.push("/")},children:"\ub85c\uadf8\uc544\uc6c3"})]})})})},v=(n(47),function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),i=Object(s.a)(a,2),o=i[0],u=i[1],j=Object(c.useState)(""),b=Object(s.a)(j,2),p=b[0],h=b[1],f=Object(c.useState)(!0),m=Object(s.a)(f,2),x=m[0],w=m[1],v=function(e){var t=e.target,n=t.value,c=t.name;"email"===c?u(n):"password"===c&&h(n)},y=function(){var e=Object(l.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!x){e.next=8;break}return e.next=5,O.createUserWithEmailAndPassword(o,p);case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,O.signInWithEmailAndPassword(o,p);case 10:n=e.sent;case 11:console.log(n),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),r(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("form",{className:"auth-wrap",onSubmit:y,children:[Object(g.jsxs)("div",{className:"auth-input-wrap",children:[Object(g.jsx)("input",{id:"auth-input",name:"email",type:"text",placeholder:"Email",required:!0,value:o,onChange:v}),Object(g.jsx)("input",{id:"auth-input",name:"password",type:"password",placeholder:"Password",required:!0,value:p,onChange:v})]}),Object(g.jsx)("span",{id:"auth-toggle",onClick:function(){return w((function(e){return!e}))},children:x?"\ub85c\uadf8\uc778":"\uacc4\uc815\uc774 \uc5c6\uc73c\uc2e0\uac00\uc694?"}),""!==n?Object(g.jsx)("h1",{id:"auth-error",children:n}):null,Object(g.jsx)("input",{id:"auth-submitBtn",type:"submit",value:x?"\uacc4\uc815 \ub9cc\ub4e4\uae30":"\ub85c\uadf8\uc778"})]})})}),y=n.p+"static/media/AuthGoogle.bbce75f8.svg",k=n.p+"static/media/AuthGithub.146e30eb.svg",F=(n(48),function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(t){var n,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)?c=new h.auth.GoogleAuthProvider:"github"===n&&(c=new h.auth.GithubAuthProvider),e.next=4,O.signInWithPopup(c);case 4:r=e.sent,console.log(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)("section",{id:"auth",children:Object(g.jsxs)("div",{className:"auth-form",children:[Object(g.jsx)("h1",{children:"\ub85c\uadf8\uc778/\ud68c\uc6d0\uac00\uc785"}),Object(g.jsx)(v,{}),Object(g.jsxs)("div",{className:"auth-auth-wrap",children:[Object(g.jsxs)("button",{id:"auth-auth",onClick:e,name:"google",children:[Object(g.jsx)("img",{id:"auth-auth-img",src:y}),"\uad6c\uae00\uacc4\uc815\uc73c\ub85c \ub85c\uadf8\uc778"]}),Object(g.jsxs)("button",{id:"auth-auth",onClick:e,name:"github",children:[Object(g.jsx)("img",{id:"auth-auth-img",src:k}),"\uae43\ud5c8\ube0c \uacc4\uc815\uc73c\ub85c \ub85c\uadf8\uc778"]})]})]})})}),S=n(30),N=(n(49),n.p+"static/media/Delete.d9483b20.svg"),C=n.p+"static/media/Modify.1d3a1d0c.svg",I=n.p+"static/media/Cancle.3f65a286.svg",P=function(e){var t=e.tweetObj,n=e.isOwner,r=Object(c.useState)(!1),a=Object(s.a)(r,2),i=a[0],o=a[1],u=Object(c.useState)(t.text),j=Object(s.a)(u,2),b=j[0],p=j[1],h=function(){var e=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc815\ub9d0 \uc774 \uac8c\uc2dc\ubb3c\uc744 \uc0ad\uc81c \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){e.next=6;break}return e.next=4,f.doc("tweets/".concat(t.id)).delete();case 4:return e.next=6,m.refFromURL(t.attachmentUrl).delete();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){return o((function(e){return!e}))},w=function(){var e=Object(l.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,f.doc("tweets/".concat(t.id)).update({text:b});case 3:o(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"tweet-form",children:[Object(g.jsxs)("div",{className:"tweet-top-wrap",children:[null!==t.name?Object(g.jsx)("h4",{id:"tweet-name",children:t.name}):Object(g.jsx)("h4",{id:"tweet-name",children:"\uc774\ub984\uc5c6\uc74c"}),i?null:n&&Object(g.jsxs)("div",{className:"tweet-btn-wrap",children:[Object(g.jsx)("button",{onClick:h,children:Object(g.jsx)("img",{id:"tweet-btn-img",src:N,alt:"\uc0ad\uc81c"})}),Object(g.jsx)("button",{onClick:O,children:Object(g.jsx)("img",{id:"tweet-btn-img",src:x,alt:"\uc218\uc815"})})]})]}),i?Object(g.jsx)(g.Fragment,{children:n&&Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{id:"tweet-edit-wrap",children:Object(g.jsxs)("form",{onSubmit:w,children:[Object(g.jsx)("input",{id:"tweet-text-input",type:"text",placeholder:"\uc218\uc815\ud560 \ub0b4\uc6a9\uc744 \uc801\uc5b4\uc8fc\uc138\uc694",value:b,onChange:function(e){var t=e.target.value;p(t)},required:!0}),Object(g.jsxs)("div",{id:"tweet-edit-btn-wrap",children:[Object(g.jsx)("button",{type:"submit",value:"\uc218\uc815",children:Object(g.jsx)("img",{id:"tweet-edit-btn-img",src:C})}),Object(g.jsx)("button",{onClick:O,children:Object(g.jsx)("img",{id:"tweet-edit-btn-img",src:I})})]})]})})})}):Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"tweet-content-wrap",children:[Object(g.jsx)("h4",{id:"tweet-text",children:t.text}),t.attachmentUrl&&Object(g.jsx)("img",{src:t.attachmentUrl,className:"tweet-img"})]})}),Object(g.jsx)("h4",{id:"tweet-date",children:t.createdAt})]})},A=(n(50),function(e){var t=e.userObj,n=Object(c.useState)([]),r=Object(s.a)(n,2),a=r[0],i=r[1];return Object(c.useEffect)((function(){f.collection("tweets").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(S.a)({id:e.id},e.data())}));i(t)}))}),[]),Object(g.jsx)("section",{id:"home",children:Object(g.jsx)("div",{children:a.map((function(e){return Object(g.jsx)(P,{tweetObj:e,isOwner:e.creatorId===t.uid},e.id)}))})})}),D=(n(51),n(57)),U=(n(52),n.p+"static/media/Tweet.19250efd.svg"),E=function(e){var t=e.userObj,n=e.togglePost,r=e.setIsPost,a=Object(c.useState)(""),i=Object(s.a)(a,2),o=i[0],u=i[1],j=Object(c.useState)(""),b=Object(s.a)(j,2),p=b[0],h=b[1],O=function(){var e=Object(l.a)(d.a.mark((function e(n){var c,a,i,s,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),c="",""===p){e.next=10;break}return a=m.ref().child("".concat(t.uid,"/").concat(Object(D.a)())),e.next=6,a.putString(p,"data_url");case 6:return i=e.sent,e.next=9,i.ref.getDownloadURL();case 9:c=e.sent;case 10:return s=new Date,j={text:o,createdAt:s.toLocaleDateString(),creatorId:t.uid,name:t.displayName,attachmentUrl:c},e.next=14,f.collection("tweets").add(j);case 14:u(""),h(""),r(!1);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)("div",{id:"tweetFactoty-form-wrap",children:Object(g.jsxs)("form",{id:"tweetFactory-form",onSubmit:O,children:[Object(g.jsxs)("div",{className:"tweetFactory-top-wrap",children:[Object(g.jsx)("h1",{id:"tweetFactory-title",children:"\uc9c8\ubb38\uc744 \ub9c8\uc74c\uaecf \uc791\uc131\ud574\uc8fc\uc138\uc694 :)"}),Object(g.jsx)("button",{id:"tweetFactory-delete-btn",onClick:n,children:Object(g.jsx)("img",{id:"tweetFactory-delete-btn-img",src:I})})]}),Object(g.jsx)("input",{id:"tweetFactory-text-input",type:"text",placeholder:"\ub0b4\uc6a9\uc744 \uc801\uc5b4\uc8fc\uc138\uc694.",maxLength:120,value:o,onChange:function(e){var t=e.target.value;u(t)}}),Object(g.jsxs)("div",{className:"tweetFactory-bottom-wrap",children:[Object(g.jsxs)("label",{for:"tweetFactory-file-input",children:["\uc0ac\uc9c4\ucd94\uac00",Object(g.jsx)("img",{src:U})]}),Object(g.jsx)("input",{id:"tweetFactory-file-input",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;h(t)},n.readAsDataURL(t)}}),p&&Object(g.jsxs)("div",{id:"tweetFactory-preview-wrap",children:[Object(g.jsx)("img",{src:p,id:"tweetFactory-preview-img",height:"50px"}),Object(g.jsx)("button",{id:"tweetFactory-preview-delete-btn",onClick:function(){return h(null)},children:Object(g.jsx)("img",{src:I})})]}),Object(g.jsx)("input",{id:"tweetFactory-tweet-btn",type:"submit",value:"\uac8c\uc2dc"})]})]})})},L=n.p+"static/media/Home.5bb3d522.svg",B=n.p+"static/media/Logo.4b19ecc2.svg",q=n.p+"static/media/Profile.78b64d9f.svg",R=function(e){var t=e.userObj,n=Object(c.useState)(!0),r=Object(s.a)(n,2),a=r[0],i=r[1],u=Object(c.useState)(!1),j=Object(s.a)(u,2),d=j[0],l=j[1],b=function(e){var t=e.target.name;"home"===t?i(!0):"profile"===t&&i(!1)},p=function(){return l((function(e){return!e}))};return Object(c.useEffect)((function(){if(!0===d)return document.body.style.cssText="\n        position : fixed;\n        top : -".concat(window.scrollY,"px\n        overflow-y : scroll;\n        width : 100%"),function(){var e=document.body.style.top;document.body.style.cssText="",window.scrollTo(0,-1*parseInt(e||"0",10))}}),[d]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("nav",{id:"navigation",children:[Object(g.jsx)("img",{src:B,id:"navigation-logo"}),Object(g.jsxs)("ul",{children:[a?Object(g.jsxs)("li",{onClick:p,children:[Object(g.jsx)("img",{src:U}),"\ucd94\uac00"]}):null,Object(g.jsx)("li",{onClick:b,children:Object(g.jsxs)(o.b,{name:"home",to:"/",className:"navigation-item",children:[Object(g.jsx)("img",{src:L,name:"home"}),"\ud648"]})}),Object(g.jsx)("li",{onClick:b,children:Object(g.jsxs)(o.b,{name:"profile",to:"/profile",className:"navigation-item",children:[Object(g.jsx)("img",{src:q,name:"profile"}),t.displayName,"\ub2d8\uc758 \ud504\ub85c\ud544"]})})]})]}),d&&a?Object(g.jsx)(E,{setIsPost:l,userObj:t,togglePost:p}):null]})},T=function(e){var t=e.refreshUser,n=e.isLoggedIn,c=e.userObj;return Object(g.jsxs)(o.a,{children:[n&&Object(g.jsx)(R,{userObj:c}),Object(g.jsx)(u.c,{children:n?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(u.a,{exact:!0,path:"/",children:Object(g.jsx)(A,{userObj:c})}),Object(g.jsx)(u.a,{exact:!0,path:"/profile",children:Object(g.jsx)(w,{userObj:c,refreshUser:t})})]}):Object(g.jsx)(u.a,{exact:!0,path:"/",children:Object(g.jsx)(F,{})})})]})};var z=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(null),i=Object(s.a)(a,2),o=i[0],u=i[1];return Object(c.useEffect)((function(){O.onAuthStateChanged((function(e){u(e?{displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}}:null),r(!0)}))}),[]),Object(g.jsx)(g.Fragment,{children:n?Object(g.jsx)(T,{isLoggedIn:Boolean(o),userObj:o,refreshUser:function(){var e=O.currentUser;u({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})}}):"Initializing..."})};console.log(p),i.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(z,{})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.f2161e08.chunk.js.map